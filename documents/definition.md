# Next.js ダッシュボードアプリケーション 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
Next.js Dashboard Application

### 1.2 目的
Next.js App Routerを使用したダッシュボードアプリケーションの開発。
企業の顧客管理、請求書管理、売上管理機能を提供する。

### 1.3 対象ユーザー
- 企業の管理者・経理担当者
- 営業担当者
- カスタマーサポート担当者

## 2. 技術仕様

### 2.1 フロントエンド技術スタック
- **フレームワーク**: Next.js (latest)
- **言語**: TypeScript 5.7.3
- **UIライブラリ**: React (latest)
- **スタイリング**: Tailwind CSS 3.4.17
- **アイコン**: Heroicons 2.2.0
- **フォーム**: @tailwindcss/forms 0.5.10

### 2.2 バックエンド技術スタック
- **データベース**: PostgreSQL
- **ORMクライアント**: postgres 3.4.6
- **認証**: NextAuth.js 5.0.0-beta.25
- **パスワードハッシュ化**: bcrypt 5.1.1
- **バリデーション**: Zod 3.25.17

### 2.3 開発・ビルドツール
- **パッケージマネージャー**: pnpm
- **CSS処理**: PostCSS 8.5.1, Autoprefixer 10.4.20
- **パフォーマンス最適化**: use-debounce 10.0.4
- **ユーティリティ**: clsx 2.1.1

## 3. 機能要件

### 3.1 認証機能
- **ログイン機能**
  - メールアドレスとパスワードによる認証
  - セッション管理
  - ログアウト機能

### 3.2 ダッシュボード機能
- **概要表示**
  - 売上統計カード表示
    - 回収済み金額
    - 未回収金額
    - 請求書総数
    - 顧客総数
  - 売上チャート（月次）
  - 最新請求書一覧（直近5件）

### 3.3 請求書管理機能
- **請求書一覧表示**
  - ページネーション（6件/ページ）
  - 検索・フィルタリング機能
    - 顧客名検索
    - メールアドレス検索
    - 金額検索
    - 日付検索
    - ステータス検索
  - ステータス表示（支払済み/未払い）

- **請求書詳細操作**
  - 新規請求書作成
  - 請求書編集
  - 請求書削除
  - 請求書ステータス更新

### 3.4 顧客管理機能
- **顧客一覧表示**
  - 顧客情報テーブル表示
  - 顧客画像表示
  - 統計情報表示
    - 総請求書数
    - 未払い金額
    - 支払済み金額

- **顧客データ管理**
  - 顧客情報検索
  - 顧客詳細表示

### 3.5 ナビゲーション機能
- **サイドナビゲーション**
  - ホーム（ダッシュボード）
  - 請求書管理
  - 顧客管理
- **レスポンシブデザイン**
  - デスクトップ・タブレット・モバイル対応

## 4. データ構造

### 4.1 User（ユーザー）
```typescript
{
  id: string;
  name: string;
  email: string;
  password: string;
}
```

### 4.2 Customer（顧客）
```typescript
{
  id: string;
  name: string;
  email: string;
  image_url: string;
}
```

### 4.3 Invoice（請求書）
```typescript
{
  id: string;
  customer_id: string;
  amount: number;
  date: string;
  status: 'pending' | 'paid';
}
```

### 4.4 Revenue（売上）
```typescript
{
  month: string;
  revenue: number;
}
```

## 5. 非機能要件

### 5.1 パフォーマンス要件
- ページ読み込み時間: 3秒以内
- データベースクエリ最適化
- 画像最適化
- 検索機能のデバウンス実装

### 5.2 セキュリティ要件
- パスワードのハッシュ化（bcrypt）
- SQLインジェクション対策
- XSS対策
- CSRF対策
- SSL/TLS通信

### 5.3 ユーザビリティ要件
- レスポンシブデザイン
- アクセシビリティ対応
- 直感的なユーザーインターフェース
- ロード状態の表示（スケルトンUI）

### 5.4 互換性要件
- モダンブラウザ対応
  - Chrome (最新版)
  - Firefox (最新版)
  - Safari (最新版)
  - Edge (最新版)

## 6. システム構成

### 6.1 ディレクトリ構造
```
app/
├── layout.tsx              # アプリケーション全体のレイアウト
├── page.tsx                # ホームページ
├── lib/                    # 共通ライブラリ
│   ├── data.ts            # データベースアクセス関数
│   ├── definitions.ts     # TypeScript型定義
│   ├── placeholder-data.ts # サンプルデータ
│   └── utils.ts           # ユーティリティ関数
├── ui/                     # UIコンポーネント
│   ├── dashboard/         # ダッシュボード関連コンポーネント
│   ├── invoices/          # 請求書関連コンポーネント
│   ├── customers/         # 顧客関連コンポーネント
│   └── global.css         # グローバルスタイル
├── query/                  # APIルート
└── seed/                   # データベース初期化
```

### 6.2 データベーステーブル
- **users**: ユーザー情報
- **customers**: 顧客情報
- **invoices**: 請求書情報
- **revenue**: 売上情報

## 7. 開発・運用要件

### 7.1 開発環境
- Node.js (最新LTS版)
- pnpm パッケージマネージャー
- PostgreSQL データベース
- VS Code (推奨エディタ)

### 7.2 ビルド・デプロイ
- `pnpm dev`: 開発サーバー起動（Turbopack使用）
- `pnpm build`: プロダクションビルド
- `pnpm start`: プロダクションサーバー起動

### 7.3 環境変数
- `POSTGRES_URL`: PostgreSQLデータベースURL
- NextAuth.js関連の環境変数

## 8. 今後の拡張予定

### 8.1 機能拡張
- ダッシュボードでのリアルタイムデータ更新
- 詳細な分析・レポート機能
- PDF請求書生成機能
- メール通知機能
- 多言語対応

### 8.2 技術的改善
- PWA対応
- オフライン機能
- リアルタイム同期
- APIの外部公開

## 9. 参考情報

- **Next.js Learn Course**: https://nextjs.org/learn/
- **Vercel**: デプロイプラットフォーム
- **Acme**: サンプル企業名として使用

---

**作成日**: 2025年6月17日  
**バージョン**: 1.0  
**作成者**: システム開発チーム
